# A3. Sistema de Empleados con Seguridad - Encapsulamiento y Propiedades

## üìã Descripci√≥n de la Actividad

Esta actividad implementa un sistema completo de gesti√≥n de empleados aplicando los principios de **encapsulamiento**, **validaci√≥n de datos**, **propiedades** y **control de acceso**. El sistema protege informaci√≥n sensible, valida datos cr√≠ticos y mantiene un historial de cambios.

## üéØ Objetivos de Aprendizaje

- Aplicar encapsulamiento con atributos privados (`__atributo`)
- Implementar propiedades con `@property` y setters
- Validar datos antes de asignarlos
- Proteger informaci√≥n sensible
- Crear historial de cambios
- Usar m√©todos privados para l√≥gica interna

## üìù Requerimientos

### Clase `Empleado`

**Atributos privados:**

- `__nombre`: Nombre completo
- `__rfc`: RFC (validado)
- `__curp`: CURP (validado)
- `__salario`: Salario mensual (> 0)
- `__fecha_ingreso`: Fecha de contrataci√≥n
- `__historial_salarios`: Lista de cambios salariales

**Propiedades:**

- `nombre`: Lectura/escritura con validaci√≥n
- `rfc`: Solo lectura despu√©s de crear
- `curp`: Solo lectura despu√©s de crear
- `salario`: Solo lectura (se modifica con m√©todo especial)
- `salario_anual`: Calculada (salario √ó 12)
- `antig√ºedad`: Calculada en a√±os

**M√©todos:**

- `aumentar_salario(porcentaje, razon)`: Aumenta salario con validaci√≥n
- `ajustar_salario(nuevo_salario, razon)`: Cambia salario con registro
- `obtener_historial_salarios()`: Retorna historial

### Clase `Departamento`

**Atributos:**

- `__nombre`: Nombre del departamento
- `__empleados`: Lista de empleados
- `__presupuesto`: Presupuesto m√°ximo

**M√©todos:**

- `contratar(empleado)`: Agrega empleado si hay presupuesto
- `despedir(rfc)`: Remueve empleado
- `calcular_nomina()`: Suma total de salarios
- `listar_empleados()`: Muestra todos los empleados

## üíª Soluci√≥n Completa

```python
# sistema_empleados.py

import re
from datetime import datetime, date
from typing import List, Optional, Dict
from dataclasses import dataclass

@dataclass
class CambioSalario:
    """Registro de un cambio de salario"""
    fecha: datetime
    salario_anterior: float
    salario_nuevo: float
    razon: str
    autorizado_por: str = "Sistema"


class Empleado:
    """
    Representa a un empleado con encapsulamiento completo de datos sensibles.
    """

    # Atributo de clase: contador de empleados
    __total_empleados = 0

    # Constantes de clase
    SALARIO_MINIMO = 7468.00  # Salario m√≠nimo mensual 2024 (ejemplo)
    RFC_PATRON = r'^[A-Z√ë&]{3,4}\d{6}[A-Z0-9]{3}$'
    CURP_PATRON = r'^[A-Z]{4}\d{6}[HM][A-Z]{5}[0-9A-Z]\d$'

    def __init__(self, nombre: str, rfc: str, curp: str, salario: float,
                 fecha_ingreso: Optional[date] = None):
        """
        Inicializa un empleado con validaciones estrictas.

        Args:
            nombre (str): Nombre completo del empleado
            rfc (str): RFC v√°lido
            curp (str): CURP v√°lida
            salario (float): Salario mensual
            fecha_ingreso (date, optional): Fecha de ingreso. Default: hoy

        Raises:
            ValueError: Si alg√∫n dato no es v√°lido
        """
        # Validar y asignar nombre
        self.nombre = nombre  # Usa el setter

        # Validar y asignar RFC (inmutable despu√©s de crear)
        if not self.__validar_rfc(rfc):
            raise ValueError(f"RFC inv√°lido: {rfc}")
        self.__rfc = rfc.upper()

        # Validar y asignar CURP (inmutable despu√©s de crear)
        if not self.__validar_curp(curp):
            raise ValueError(f"CURP inv√°lida: {curp}")
        self.__curp = curp.upper()

        # Validar y asignar salario
        if salario < self.SALARIO_MINIMO:
            raise ValueError(
                f"El salario debe ser al menos ${self.SALARIO_MINIMO:,.2f}"
            )
        self.__salario = salario

        # Fecha de ingreso
        self.__fecha_ingreso = fecha_ingreso or date.today()

        # Historial de cambios salariales (privado)
        self.__historial_salarios: List[CambioSalario] = [
            CambioSalario(
                fecha=datetime.now(),
                salario_anterior=0,
                salario_nuevo=salario,
                razon="Salario inicial"
            )
        ]

        # Informaci√≥n adicional protegida
        self._departamento: Optional[str] = None
        self._puesto: Optional[str] = None
        self._activo = True

        # Incrementar contador
        Empleado.__total_empleados += 1

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # PROPIEDADES - CONTROL DE ACCESO CON VALIDACI√ìN
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    @property
    def nombre(self) -> str:
        """Nombre del empleado (lectura/escritura)"""
        return self.__nombre

    @nombre.setter
    def nombre(self, valor: str):
        """Valida y asigna el nombre"""
        if not valor or len(valor.strip()) < 3:
            raise ValueError("El nombre debe tener al menos 3 caracteres")

        # Solo letras, espacios y algunos caracteres especiales
        if not re.match(r'^[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s\.]+$', valor):
            raise ValueError("El nombre solo puede contener letras y espacios")

        self.__nombre = valor.strip().title()

    @property
    def rfc(self) -> str:
        """RFC del empleado (solo lectura)"""
        return self.__rfc

    @property
    def curp(self) -> str:
        """CURP del empleado (solo lectura)"""
        return self.__curp

    @property
    def salario(self) -> float:
        """Salario mensual actual (solo lectura)"""
        return self.__salario

    @property
    def salario_anual(self) -> float:
        """Calcula el salario anual (12 meses)"""
        return self.__salario * 12

    @property
    def fecha_ingreso(self) -> date:
        """Fecha de ingreso (solo lectura)"""
        return self.__fecha_ingreso

    @property
    def antig√ºedad(self) -> float:
        """
        Calcula la antig√ºedad en a√±os.

        Returns:
            float: A√±os de antig√ºedad con decimales
        """
        hoy = date.today()
        diferencia = hoy - self.__fecha_ingreso
        return diferencia.days / 365.25

    @property
    def departamento(self) -> Optional[str]:
        """Departamento al que pertenece (protegido)"""
        return self._departamento

    @departamento.setter
    def departamento(self, valor: str):
        """Asigna el departamento"""
        self._departamento = valor

    @property
    def puesto(self) -> Optional[str]:
        """Puesto del empleado (protegido)"""
        return self._puesto

    @puesto.setter
    def puesto(self, valor: str):
        """Asigna el puesto"""
        self._puesto = valor

    @property
    def activo(self) -> bool:
        """Estado del empleado (activo/inactivo)"""
        return self._activo

    @property
    def ultimo_cambio_salario(self) -> Optional[CambioSalario]:
        """Retorna el √∫ltimo cambio de salario registrado"""
        if len(self.__historial_salarios) > 1:
            return self.__historial_salarios[-1]
        return None

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS P√öBLICOS
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    def aumentar_salario(self, porcentaje: float, razon: str,
                        autorizado_por: str = "RH") -> bool:
        """
        Aumenta el salario por un porcentaje.

        Args:
            porcentaje (float): Porcentaje de aumento (ej: 10 para 10%)
            razon (str): Raz√≥n del aumento
            autorizado_por (str, optional): Qui√©n autoriza

        Returns:
            bool: True si se aplic√≥ el aumento

        Raises:
            ValueError: Si el porcentaje es inv√°lido
        """
        if porcentaje <= 0:
            raise ValueError("El porcentaje debe ser positivo")

        if porcentaje > 100:
            raise ValueError("El porcentaje no puede exceder 100%")

        nuevo_salario = self.__salario * (1 + porcentaje / 100)
        return self.__registrar_cambio_salario(
            nuevo_salario, razon, autorizado_por
        )

    def ajustar_salario(self, nuevo_salario: float, razon: str,
                       autorizado_por: str = "RH") -> bool:
        """
        Ajusta el salario a un valor espec√≠fico.

        Args:
            nuevo_salario (float): Nuevo salario mensual
            razon (str): Raz√≥n del ajuste
            autorizado_por (str, optional): Qui√©n autoriza

        Returns:
            bool: True si se aplic√≥ el ajuste

        Raises:
            ValueError: Si el nuevo salario es inv√°lido
        """
        if nuevo_salario < self.SALARIO_MINIMO:
            raise ValueError(
                f"El salario no puede ser menor a ${self.SALARIO_MINIMO:,.2f}"
            )

        if nuevo_salario == self.__salario:
            print("‚ö† El nuevo salario es igual al actual. No se registra cambio.")
            return False

        return self.__registrar_cambio_salario(
            nuevo_salario, razon, autorizado_por
        )

    def obtener_historial_salarios(self) -> List[Dict]:
        """
        Retorna una copia del historial de salarios.

        Returns:
            List[Dict]: Lista de diccionarios con el historial
        """
        return [
            {
                'fecha': cambio.fecha.strftime('%Y-%m-%d %H:%M'),
                'salario_anterior': f"${cambio.salario_anterior:,.2f}",
                'salario_nuevo': f"${cambio.salario_nuevo:,.2f}",
                'incremento': f"${cambio.salario_nuevo - cambio.salario_anterior:+,.2f}",
                'porcentaje': f"{((cambio.salario_nuevo / cambio.salario_anterior - 1) * 100):+.2f}%" if cambio.salario_anterior > 0 else "N/A",
                'razon': cambio.razon,
                'autorizado_por': cambio.autorizado_por
            }
            for cambio in self.__historial_salarios
        ]

    def dar_de_baja(self, razon: str = ""):
        """
        Da de baja al empleado (marca como inactivo).

        Args:
            razon (str, optional): Raz√≥n de la baja
        """
        self._activo = False
        print(f"‚úì Empleado {self.__nombre} dado de baja. Raz√≥n: {razon}")

    def reactivar(self):
        """Reactiva un empleado dado de baja"""
        self._activo = True
        print(f"‚úì Empleado {self.__nombre} reactivado")

    def calcular_aguinaldo(self, dias: int = 15) -> float:
        """
        Calcula el aguinaldo del empleado.

        Args:
            dias (int, optional): D√≠as de aguinaldo. Default 15.

        Returns:
            float: Monto del aguinaldo
        """
        salario_diario = self.__salario / 30
        return salario_diario * dias

    def calcular_vacaciones(self) -> int:
        """
        Calcula los d√≠as de vacaciones seg√∫n antig√ºedad.

        Returns:
            int: D√≠as de vacaciones correspondientes
        """
        a√±os = int(self.antig√ºedad)

        if a√±os < 1:
            return 6
        elif a√±os < 2:
            return 8
        elif a√±os < 3:
            return 10
        elif a√±os < 4:
            return 12
        elif a√±os < 5:
            return 14
        else:
            # 2 d√≠as adicionales por cada a√±o despu√©s del 5to
            return 14 + ((a√±os - 5) * 2)

    def generar_reporte(self) -> str:
        """
        Genera un reporte completo del empleado.

        Returns:
            str: Reporte formateado
        """
        estado = "ACTIVO ‚úì" if self._activo else "INACTIVO ‚úó"

        reporte = f"""
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    REPORTE DE EMPLEADO                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

DATOS PERSONALES:
  Nombre:           {self.__nombre}
  RFC:              {self.__rfc}
  CURP:             {self.__curp}
  Estado:           {estado}

INFORMACI√ìN LABORAL:
  Departamento:     {self._departamento or 'No asignado'}
  Puesto:           {self._puesto or 'No asignado'}
  Fecha ingreso:    {self.__fecha_ingreso.strftime('%d/%m/%Y')}
  Antig√ºedad:       {self.antig√ºedad:.1f} a√±os

COMPENSACI√ìN:
  Salario mensual:  ${self.__salario:,.2f}
  Salario anual:    ${self.salario_anual:,.2f}
  D√≠as vacaciones:  {self.calcular_vacaciones()} d√≠as
  Aguinaldo:        ${self.calcular_aguinaldo():,.2f}

HISTORIAL SALARIAL:
  Total de cambios: {len(self.__historial_salarios)}
"""

        if self.ultimo_cambio_salario:
            ultimo = self.ultimo_cambio_salario
            reporte += f"""  √öltimo cambio:    {ultimo.fecha.strftime('%d/%m/%Y')}
  Raz√≥n:            {ultimo.razon}
"""

        reporte += "\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n"

        return reporte

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS PRIVADOS (L√ìGICA INTERNA)
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    def __validar_rfc(self, rfc: str) -> bool:
        """
        Valida el formato del RFC.

        Args:
            rfc (str): RFC a validar

        Returns:
            bool: True si es v√°lido
        """
        return bool(re.match(self.RFC_PATRON, rfc.upper()))

    def __validar_curp(self, curp: str) -> bool:
        """
        Valida el formato de la CURP.

        Args:
            curp (str): CURP a validar

        Returns:
            bool: True si es v√°lida
        """
        return bool(re.match(self.CURP_PATRON, curp.upper()))

    def __registrar_cambio_salario(self, nuevo_salario: float, razon: str,
                                   autorizado_por: str) -> bool:
        """
        Registra un cambio de salario en el historial.

        Args:
            nuevo_salario (float): Nuevo salario
            razon (str): Raz√≥n del cambio
            autorizado_por (str): Qui√©n autoriza

        Returns:
            bool: True si se registr√≥
        """
        cambio = CambioSalario(
            fecha=datetime.now(),
            salario_anterior=self.__salario,
            salario_nuevo=nuevo_salario,
            razon=razon,
            autorizado_por=autorizado_por
        )

        self.__historial_salarios.append(cambio)
        self.__salario = nuevo_salario

        incremento = nuevo_salario - cambio.salario_anterior
        porcentaje = (incremento / cambio.salario_anterior) * 100

        print(f"‚úì Salario ajustado: ${cambio.salario_anterior:,.2f} ‚Üí "
              f"${nuevo_salario:,.2f} ({porcentaje:+.2f}%)")

        return True

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS DE CLASE
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    @classmethod
    def total_empleados(cls) -> int:
        """Retorna el total de empleados creados"""
        return cls.__total_empleados

    @classmethod
    def salario_minimo_actual(cls) -> float:
        """Retorna el salario m√≠nimo vigente"""
        return cls.SALARIO_MINIMO

    @classmethod
    def validar_rfc_estatico(cls, rfc: str) -> bool:
        """Valida un RFC sin crear instancia"""
        return bool(re.match(cls.RFC_PATRON, rfc.upper()))

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS ESPECIALES
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    def __str__(self) -> str:
        """Representaci√≥n legible del empleado"""
        estado = "‚úì" if self._activo else "‚úó"
        return (f"{estado} {self.__nombre} ({self.__rfc}) - "
                f"{self._puesto or 'Sin puesto'} - ${self.__salario:,.2f}")

    def __repr__(self) -> str:
        """Representaci√≥n t√©cnica"""
        return (f"Empleado(nombre='{self.__nombre}', rfc='{self.__rfc}', "
                f"salario={self.__salario})")

    def __eq__(self, otro) -> bool:
        """Compara empleados por RFC"""
        if not isinstance(otro, Empleado):
            return False
        return self.__rfc == otro.rfc

    def __hash__(self):
        """Permite usar empleados en sets"""
        return hash(self.__rfc)


class Departamento:
    """Gestiona un departamento y sus empleados"""

    def __init__(self, nombre: str, presupuesto: float):
        """
        Inicializa un departamento.

        Args:
            nombre (str): Nombre del departamento
            presupuesto (float): Presupuesto m√°ximo para salarios
        """
        self.__nombre = nombre
        self.__empleados: List[Empleado] = []
        self.__presupuesto = presupuesto

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # PROPIEDADES
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    @property
    def nombre(self) -> str:
        """Nombre del departamento (solo lectura)"""
        return self.__nombre

    @property
    def presupuesto(self) -> float:
        """Presupuesto del departamento"""
        return self.__presupuesto

    @presupuesto.setter
    def presupuesto(self, valor: float):
        """Modifica el presupuesto con validaci√≥n"""
        if valor < 0:
            raise ValueError("El presupuesto no puede ser negativo")

        if valor < self.calcular_nomina():
            raise ValueError(
                f"El presupuesto no puede ser menor a la n√≥mina actual "
                f"(${self.calcular_nomina():,.2f})"
            )

        self.__presupuesto = valor
        print(f"‚úì Presupuesto actualizado: ${valor:,.2f}")

    @property
    def cantidad_empleados(self) -> int:
        """Cantidad de empleados activos"""
        return len([e for e in self.__empleados if e.activo])

    @property
    def presupuesto_disponible(self) -> float:
        """Calcula el presupuesto disponible"""
        return self.__presupuesto - self.calcular_nomina()

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS P√öBLICOS
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    def contratar(self, empleado: Empleado, puesto: str) -> bool:
        """
        Contrata un empleado si hay presupuesto.

        Args:
            empleado (Empleado): Empleado a contratar
            puesto (str): Puesto a asignar

        Returns:
            bool: True si se contrat√≥ exitosamente

        Raises:
            ValueError: Si no hay presupuesto suficiente
        """
        if not isinstance(empleado, Empleado):
            raise TypeError("Solo se pueden contratar objetos Empleado")

        if empleado in self.__empleados:
            print(f"‚ö† {empleado.nombre} ya trabaja en {self.__nombre}")
            return False

        # Verificar presupuesto
        nomina_proyectada = self.calcular_nomina() + empleado.salario

        if nomina_proyectada > self.__presupuesto:
            faltante = nomina_proyectada - self.__presupuesto
            raise ValueError(
                f"Presupuesto insuficiente. Faltan ${faltante:,.2f}\n"
                f"N√≥mina actual: ${self.calcular_nomina():,.2f}\n"
                f"Salario empleado: ${empleado.salario:,.2f}\n"
                f"Presupuesto: ${self.__presupuesto:,.2f}"
            )

        # Contratar
        self.__empleados.append(empleado)
        empleado.departamento = self.__nombre
        empleado.puesto = puesto

        print(f"‚úì {empleado.nombre} contratado como {puesto} en {self.__nombre}")
        print(f"  Presupuesto restante: ${self.presupuesto_disponible:,.2f}")

        return True

    def despedir(self, rfc: str, razon: str = "") -> bool:
        """
        Despide un empleado por su RFC.

        Args:
            rfc (str): RFC del empleado
            razon (str, optional): Raz√≥n del despido

        Returns:
            bool: True si se despidi√≥
        """
        for empleado in self.__empleados:
            if empleado.rfc == rfc.upper():
                empleado.dar_de_baja(razon)
                print(f"‚úì {empleado.nombre} removido de {self.__nombre}")
                print(f"  Presupuesto liberado: ${empleado.salario:,.2f}")
                return True

        print(f"‚úó No se encontr√≥ empleado con RFC: {rfc}")
        return False

    def calcular_nomina(self) -> float:
        """
        Calcula la n√≥mina mensual total (solo empleados activos).

        Returns:
            float: Total de la n√≥mina
        """
        return sum(
            emp.salario
            for emp in self.__empleados
            if emp.activo
        )

    def listar_empleados(self, solo_activos: bool = True):
        """
        Lista todos los empleados del departamento.

        Args:
            solo_activos (bool, optional): Si mostrar solo activos. Default True.
        """
        empleados_filtrados = [
            emp for emp in self.__empleados
            if emp.activo or not solo_activos
        ]

        if not empleados_filtrados:
            print(f"No hay empleados en {self.__nombre}")
            return

        print(f"\n{'‚ïê'*70}")
        print(f"EMPLEADOS DE {self.__nombre.upper()}")
        print(f"{'‚ïê'*70}\n")

        for i, emp in enumerate(empleados_filtrados, 1):
            print(f"{i}. {emp}")

        print(f"\n{'‚îÄ'*70}")
        print(f"Total empleados: {len(empleados_filtrados)}")
        print(f"N√≥mina mensual: ${self.calcular_nomina():,.2f}")
        print(f"Presupuesto disponible: ${self.presupuesto_disponible:,.2f}")
        print(f"{'‚ïê'*70}\n")

    def obtener_estadisticas(self) -> Dict:
        """Retorna estad√≠sticas del departamento"""
        empleados_activos = [e for e in self.__empleados if e.activo]

        if not empleados_activos:
            return {"error": "No hay empleados activos"}

        salarios = [e.salario for e in empleados_activos]

        return {
            "nombre": self.__nombre,
            "empleados_totales": len(self.__empleados),
            "empleados_activos": len(empleados_activos),
            "nomina_mensual": self.calcular_nomina(),
            "nomina_anual": self.calcular_nomina() * 12,
            "presupuesto": self.__presupuesto,
            "presupuesto_disponible": self.presupuesto_disponible,
            "utilizaci√≥n_presupuesto": (self.calcular_nomina() / self.__presupuesto) * 100,
            "salario_promedio": sum(salarios) / len(salarios),
            "salario_minimo": min(salarios),
            "salario_maximo": max(salarios)
        }

    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # M√âTODOS ESPECIALES
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    def __str__(self) -> str:
        return (f"Departamento {self.__nombre} - "
                f"{self.cantidad_empleados} empleados - "
                f"N√≥mina: ${self.calcular_nomina():,.2f}")

    def __repr__(self) -> str:
        return f"Departamento('{self.__nombre}', {self.__presupuesto})"

    def __len__(self) -> int:
        """Retorna cantidad de empleados activos"""
        return self.cantidad_empleados


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# DEMOSTRACI√ìN
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def main():
    """Demostraci√≥n del sistema de empleados"""

    print("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó")
    print("‚ïë         SISTEMA DE GESTI√ìN DE EMPLEADOS CON SEGURIDAD        ‚ïë")
    print("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n")

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 1. CREAR EMPLEADOS CON VALIDACIONES
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("1. CREANDO EMPLEADOS")
    print("‚îÄ" * 63)

    try:
        emp1 = Empleado(
            nombre="Juan P√©rez Garc√≠a",
            rfc="PEGJ850101ABC",
            curp="PEGJ850101HDFRNN09",
            salario=25000,
            fecha_ingreso=date(2020, 1, 15)
        )
        emp1.puesto = "Desarrollador Senior"
        print(f"‚úì {emp1}")

        emp2 = Empleado(
            nombre="Mar√≠a Gonz√°lez L√≥pez",
            rfc="GOLM900515XYZ",
            curp="GOLM900515MDFLPR08",
            salario=30000,
            fecha_ingreso=date(2019, 3, 1)
        )
        emp2.puesto = "Gerente de Proyecto"
        print(f"‚úì {emp2}")

        emp3 = Empleado(
            nombre="Carlos Rodr√≠guez S√°nchez",
            rfc="ROSC920820DEF",
            curp="ROSC920820HDFSRR07",
            salario=20000,
            fecha_ingreso=date(2021, 6, 10)
        )
        emp3.puesto = "Desarrollador Junior"
        print(f"‚úì {emp3}")

    except ValueError as e:
        print(f"‚úó Error al crear empleado: {e}")

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 2. DEMOSTRAR ENCAPSULAMIENTO
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n\n2. DEMOSTRANDO ENCAPSULAMIENTO")
    print("‚îÄ" * 63)

    # Intentar modificar RFC (debe fallar)
    try:
        emp1.rfc = "NUEVO123"
    except AttributeError:
        print("‚úì No se puede modificar el RFC (protegido)")

    # Intentar acceder a salario privado
    try:
        print(emp1.__salario)
    except AttributeError:
        print("‚úì No se puede acceder directamente al salario privado")

    # Forma correcta de acceder
    print(f"‚úì Salario (usando propiedad): ${emp1.salario:,.2f}")
    print(f"‚úì Salario anual (calculado): ${emp1.salario_anual:,.2f}")
    print(f"‚úì Antig√ºedad: {emp1.antig√ºedad:.2f} a√±os")

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 3. MODIFICAR SALARIOS CON REGISTRO
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n\n3. MODIFICACI√ìN DE SALARIOS")
    print("‚îÄ" * 63)

    # Aumento por porcentaje
    emp1.aumentar_salario(10, "Aumento anual por desempe√±o", "Director de RH")

    # Ajuste directo
    emp2.ajustar_salario(32000, "Ajuste por cambio de responsabilidades", "CEO")

    # Intentar salario inv√°lido
    try:
        emp3.ajustar_salario(5000, "Test")
    except ValueError as e:
        print(f"‚úì Validaci√≥n funcionando: {e}")

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 4. HISTORIAL DE CAMBIOS
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n\n4. HISTORIAL DE CAMBIOS SALARIALES")
    print("‚îÄ" * 63)

    historial = emp1.obtener_historial_salarios()
    print(f"\nHistorial de {emp1.nombre}:")
    for cambio in historial:
        print(f"""
  Fecha:           {cambio['fecha']}
  De:              {cambio['salario_anterior']}
  A:               {cambio['salario_nuevo']}
  Incremento:      {cambio['incremento']} ({cambio['porcentaje']})
  Raz√≥n:           {cambio['razon']}
  Autorizado por:  {cambio['autorizado_por']}
  {'-'*60}""")

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 5. CREAR DEPARTAMENTO Y GESTIONAR EMPLEADOS
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n\n5. GESTI√ìN DE DEPARTAMENTO")
    print("‚îÄ" * 63)

    depto_ti = Departamento("Tecnolog√≠a de la Informaci√≥n", presupuesto=150000)

    # Contratar empleados
    depto_ti.contratar(emp1, "Desarrollador Senior")
    depto_ti.contratar(emp2, "Gerente de Proyecto")
    depto_ti.contratar(emp3, "Desarrollador Junior")

    # Listar empleados
    depto_ti.listar_empleados()

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 6. ESTAD√çSTICAS
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n6. ESTAD√çSTICAS DEL DEPARTAMENTO")
    print("‚îÄ" * 63)

    stats = depto_ti.obtener_estadisticas()
    print(f"""
üìä {stats['nombre']}:

  PERSONAL:
    Empleados activos:        {stats['empleados_activos']}
    Empleados totales:        {stats['empleados_totales']}

  FINANCIERO:
    N√≥mina mensual:           ${stats['nomina_mensual']:,.2f}
    N√≥mina anual:             ${stats['nomina_anual']:,.2f}
    Presupuesto asignado:     ${stats['presupuesto']:,.2f}
    Presupuesto disponible:   ${stats['presupuesto_disponible']:,.2f}
    Utilizaci√≥n:              {stats['utilizaci√≥n_presupuesto']:.1f}%

  SALARIOS:
    Promedio:                 ${stats['salario_promedio']:,.2f}
    M√≠nimo:                   ${stats['salario_minimo']:,.2f}
    M√°ximo:                   ${stats['salario_maximo']:,.2f}
    """)

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 7. REPORTE INDIVIDUAL
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n7. REPORTE INDIVIDUAL DE EMPLEADO")
    print("‚îÄ" * 63)

    print(emp1.generar_reporte())

    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    # 8. CALCULAR PRESTACIONES
    # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    print("\n8. PRESTACIONES")
    print("‚îÄ" * 63)

    print(f"\nPrestaciones de {emp1.nombre}:")
    print(f"  D√≠as de vacaciones:  {emp1.calcular_vacaciones()} d√≠as")
    print(f"  Aguinaldo:           ${emp1.calcular_aguinaldo():,.2f}")
    print(f"  Prima vacacional:    ${emp1.calcular_aguinaldo(emp1.calcular_vacaciones() * 0.25):,.2f}")

    print("\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n")


if __name__ == "__main__":
    main()
```

## üîç Explicaci√≥n Detallada

### 1. Encapsulamiento con Atributos Privados

```python
def __init__(self, nombre: str, rfc: str, ...):
    self.__nombre = nombre      # Privado (name mangling)
    self.__rfc = rfc.upper()    # Privado e inmutable
    self.__salario = salario    # Privado, solo modificable por m√©todos
```

- Prefijo `__` activa "name mangling"
- Se convierte en `_Empleado__nombre`
- No accesible directamente desde fuera

### 2. Propiedades para Control de Acceso

```python
@property
def salario(self) -> float:
    """Solo lectura"""
    return self.__salario

@property
def nombre(self) -> str:
    return self.__nombre

@nombre.setter
def nombre(self, valor: str):
    if not valor or len(valor.strip()) < 3:
        raise ValueError("...")
    self.__nombre = valor.strip().title()
```

- **Getter**: Permite leer el valor
- **Setter**: Valida antes de asignar
- **Solo lectura**: Property sin setter

### 3. M√©todos Privados

```python
def __validar_rfc(self, rfc: str) -> bool:
    """M√©todo privado de validaci√≥n"""
    return bool(re.match(self.RFC_PATRON, rfc.upper()))
```

- No accesibles desde fuera
- L√≥gica interna de la clase
- Ayudan a mantener c√≥digo limpio

### 4. Historial de Cambios

```python
def __registrar_cambio_salario(self, nuevo_salario, razon, autorizado_por):
    cambio = CambioSalario(...)
    self.__historial_salarios.append(cambio)
    self.__salario = nuevo_salario
```

- Registra cada modificaci√≥n
- Auditor√≠a completa
- Trazabilidad de cambios

## ‚úÖ Puntos Clave para Replicar

1. **Atributos privados**: Usar `__` para datos sensibles
2. **Propiedades**: Control total con `@property`
3. **Validaciones**: En setters y constructores
4. **M√©todos privados**: L√≥gica interna protegida
5. **Historial**: Registrar cambios importantes
6. **Type hints**: Documentar tipos esperados
7. **Docstrings**: Documentar comportamiento
8. **Excepciones**: Validar y lanzar errores apropiados

## üéì Conceptos Aplicados

- ‚úÖ Encapsulamiento completo
- ‚úÖ Atributos privados (`__atributo`)
- ‚úÖ Propiedades con getters y setters
- ‚úÖ Validaciones exhaustivas
- ‚úÖ M√©todos privados
- ‚úÖ Historial de cambios
- ‚úÖ Dataclasses
- ‚úÖ Type hints completos
- ‚úÖ Regex para validaciones
- ‚úÖ Manejo de fechas

## üöÄ Extensiones Posibles

1. Persistencia en base de datos
2. Sistema de autenticaci√≥n
3. Roles y permisos
4. C√°lculo de impuestos (ISR, IMSS)
5. Generaci√≥n de recibos de n√≥mina en PDF
6. Integraci√≥n con API de SAT
7. Dashboard con visualizaciones
8. Notificaciones por email
